<mat-card class="monthly-chart-widget">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>trending_up</mat-icon>
      Evolução Mensal
    </mat-card-title>
    <mat-card-subtitle>Receita e número de serviços por mês</mat-card-subtitle>
    
    <div class="header-actions">
      <mat-form-field appearance="outline" class="year-select">
        <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange()">
          <mat-option *ngFor="let year of availableYears" [value]="year">
            {{ year }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </mat-card-header>

  <mat-card-content>
    <div class="chart-container">
      <div class="chart-legend">
        <div class="legend-item">
          <div class="legend-color bar-color"></div>
          <span>Receita (R$)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color line-color"></div>
          <span>Nº Serviços</span>
        </div>
      </div>
      
      <div class="chart-wrapper">
        <canvas #canvas class="chart-canvas"></canvas>
      </div>
      
      <div class="chart-summary">
        <div class="summary-item">
          <span class="summary-label">Total Receita:</span>
          <span class="summary-value">{{ formatCurrency(getTotalEarnings()) }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Total Serviços:</span>
          <span class="summary-value">{{ getTotalServices() }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Média Mensal:</span>
          <span class="summary-value">{{ formatCurrency(getAverageEarnings()) }}</span>
        </div>
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions class="card-actions">
    <button mat-button color="primary">
      <mat-icon>analytics</mat-icon>
      Relatório Detalhado
    </button>
    <button mat-button>
      <mat-icon>download</mat-icon>
      Exportar
    </button>
  </mat-card-actions>
</mat-card>
